<style>
/* ---------------------------------------------------- */
/* TIPOGRAFIA, CORES E LAYOUT GLOBAL (MOBILE FIRST) */
/* ---------------------------------------------------- */
body {
    font-family: 'Roboto', Arial, sans-serif;
    padding: 1rem;
    background: #121212; /* Fundo preto puro (Dark Mode Standard) */
    color: #e0e0e0; /* Letras Brancas/Claras suavizadas */
    line-height: 1.6; /* Aumenta o espaçamento entre linhas para melhor leitura */
    margin: 0;
}

.box {
    background: #1e1e1e; /* Fundo do box escuro, com contraste sutil */
    padding: 1.5rem;
    border-radius: 12px; /* Bordas mais suaves */
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.6); /* Sombra mais profunda */
    max-width: 500px;
    margin: 1rem auto; /* Garante margem superior e inferior */
    border: 1px solid #333; /* Borda sutil para definir o box */
}

/* ---------------------------------------------------- */
/* TÍTULOS E SEÇÕES */
/* ---------------------------------------------------- */
h1 {
    font-size: 1.9rem; /* Tamanho grande para destaque no celular */
    margin-bottom: 0.1rem;
    color: #4CAF50; /* Cor de destaque */
    font-weight: 700; /* Negrito forte */
}

h2 {
    font-size: 1.1rem; /* Subtítulo ideal para mobile */
    margin-bottom: 1.5rem;
    color: #b0b0b0; /* Cor mais suave para o subtítulo */
    font-weight: 400;
}

/* ---------------------------------------------------- */
/* COMPONENTES DE INTERAÇÃO */
/* ---------------------------------------------------- */
/* Área de texto de responsabilidade */
textarea {
    width: 100%;
    height: 12rem; /* Altura ajustada para telas menores */
    margin-bottom: 1.5rem;
    padding: 0.9rem;
    resize: none;
    font-size: 0.9rem;
    line-height: 1.7; /* Alto espaçamento para o termo de responsabilidade */
    background-color: #2b2b2b;
    color: #e0e0e0;
    border: none; /* Remove a borda padrão para visual limpo */
    border-radius: 8px;
    box-shadow: inset 0 1px 3px rgba(0,0,0,0.5); /* Sombra interna sutil */
}

/* Labels */
label {
    display: block;
    margin-bottom: 0.5rem;
    font-size: 0.95rem;
    font-weight: 500;
}

/* Inputs de texto e checkbox */
input[type="text"] {
    width: 100%;
    padding: 1rem;
    margin: 0.3rem 0 1.5rem 0;
    font-size: 1rem; /* Tamanho ótimo para input no celular */
    box-sizing: border-box;
    background-color: #2b2b2b;
    color: #e0e0e0;
    border: 1px solid #444;
    border-radius: 8px;
    transition: border-color 0.3s;
}
input[type="text"]:focus {
    border-color: #4CAF50; /* Foco em verde */
    outline: none;
}

/* Checkbox */
input[type="checkbox"] {
    margin-right: 0.6rem;
    transform: scale(1.15); /* Checkbox um pouco maior para facilitar o toque */
    vertical-align: middle;
}

/* ---------------------------------------------------- */
/* BOTÃO E FEEDBACK */
/* ---------------------------------------------------- */
button {
    width: 100%;
    padding: 1.1rem;
    margin-top: 1rem; /* Adiciona espaçamento superior ao botão principal */
    font-size: 1.05rem;
    font-weight: bold;
    background-color: #25D366;
    color: #1a1a1a;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    transition: background-color 0.3s ease, opacity 0.3s ease;
}

button:hover:not(:disabled) {
    background-color: #1FAF54;
    box-shadow: 0 4px 10px rgba(37, 211, 102, 0.4);
}

button:disabled {
    background-color: #383838; /* Cinza escuro para desabilitado */
    color: #888;
    cursor: not-allowed;
}

/* Contador de vagas */
#vagasInfo {
    text-align: center;
    margin-bottom: 1.5rem;
    font-size: 1.1rem;
    font-weight: bold;
    color: #4CAF50;
    padding: 0.75rem;
    border: 2px solid #4CAF50; /* Borda mais grossa para destaque */
    border-radius: 8px;
    background-color: #2b2b2b;
}

/* Mensagem de Lotado e Erro */
#alertaLotado {
    font-size: 1.1rem;
    padding: 1rem;
    background-color: #d32f2f; /* Vermelho mais forte (Material Design) */
    color: white;
    border-radius: 8px;
    text-align: center;
    margin-bottom: 1.5rem;
    font-weight: bold;
}

#mensagemErro {
    margin-top: 1rem;
    font-size: 0.95rem;
    color: #ff8a80;
    text-align: center;
}
</style>

<div class="box">
    <h1>MORRO DA MESA 23 DE NOVEMBRO</h1>
    <h2>Trilheiros de Rondonópolis</h2>

    <div id="vagasInfo">
        Vagas disponíveis: <span id="vagasRestantes">75</span> / 75
    </div>
    
    <div id="alertaLotado" style="display:none;">⚠️ Grupo lotado! As 75 vagas foram preenchidas.</div>

    <textarea readonly>
- O percurso tem nível médio a avançado, com trechos íngremes e escorregadios.
- É obrigatório o uso de calçados adequados, água, protetor solar e roupas confortáveis.
- É proibido o uso de caixas de som para preservar o ambiente.
- O participante deve respeitar a natureza, não deixar lixo e seguir as orientações do guia.
- A organização não se responsabiliza por acidentes causados por imprudência ou desrespeito às regras.
- Em caso de condições climáticas adversas, o passeio poderá ser cancelado ou adiado.
- É indispensável estar em boas condições de saúde para participar da trilha.
- Pessoas com problemas cardíacos, respiratórios, mobilidade reduzida ou com histórico de desmaios/síncopes não são orientadas a realizar esta atividade.
- Participantes sedentários ou sem preparo físico devem avaliar cuidadosamente os riscos antes de confirmar presença.
- Crianças menores de 14 anos não serão permitidas.
    </textarea>

    <label for="nome">Nome completo</label>
    <input type="text" id="nome" placeholder="Digite seu nome completo">

    <label>
        <input type="checkbox" id="aceite"> Confirmo que li e aceito o termo de responsabilidade
    </label>

    <button id="entrarBtn" disabled>
        Entrar no grupo do WhatsApp
    </button>

    <div id="mensagemErro"></div>
</div>

<script>
    // Capacidade máxima do grupo
    const MAX_VAGAS = 75;
    let vagasDisponiveis = MAX_VAGAS; 

    // Referências aos elementos do DOM
    const nomeInput = document.getElementById('nome');
    const aceiteCheckbox = document.getElementById('aceite');
    const entrarBtn = document.getElementById('entrarBtn');
    const mensagemErro = document.getElementById('mensagemErro');
    const alertaLotado = document.getElementById('alertaLotado');
    const vagasRestantesSpan = document.getElementById('vagasRestantes');
    const vagasInfoDiv = document.getElementById('vagasInfo');

    // Função para verificar os campos e habilitar/desabilitar o botão
    function checkInputs() {
        const nomeValido = nomeInput.value.trim() !== '';
        const aceiteValido = aceiteCheckbox.checked;

        if (nomeValido && aceiteValido && vagasDisponiveis > 0) {
            entrarBtn.disabled = false;
        } else {
            entrarBtn.disabled = true;
        }
    }

    // Função para atualizar o número de vagas na tela e verificar o estado de lotado
    function atualizarContador() {
        vagasRestantesSpan.textContent = vagasDisponiveis;
        
        // Bloqueio Imediato
        if (vagasDisponiveis <= 0) {
            entrarBtn.style.display = 'none';
            alertaLotado.style.display = 'block'; // Mostrar mensagem de lotado
            vagasInfoDiv.style.display = 'none'; // Esconder contador
            mensagemErro.textContent = '';
        }
    }

    // Função executada ao clicar no botão
    function handleRegistro(event) {
        event.preventDefault();

        if (vagasDisponiveis <= 0) {
            return;
        }

        // 1. Decrementa o contador
        vagasDisponiveis--;
        
        // 2. Atualiza a tela
        atualizarContador();

        // 3. Exibe uma mensagem de sucesso simulada (em um caso real, seria um redirecionamento ao link)
        mensagemErro.innerHTML = '<span style="color:#25D366; font-weight: bold;">✅ Vaga reservada! Você seria redirecionado para o WhatsApp agora.</span>';
        
        // 4. Limpa e reseta
        nomeInput.value = '';
        aceiteCheckbox.checked = false;
        checkInputs();
    }
    
    // Event Listeners
    nomeInput.addEventListener('input', checkInputs);
    aceiteCheckbox.addEventListener('change', checkInputs);
    entrarBtn.addEventListener('click', handleRegistro);
    
    // Inicialização
    atualizarContador();
    checkInputs();
</script>
