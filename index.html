<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>MORRO DA MESA — 23 DE NOVEMBRO</title>

<style>
:root{
    --bg:#05060a;
    --panel:#0f1620;
    --text:#e8f0ff;
    --blue:#4da8ff;
    --pink:#ff4dff;
    --green:#4dff88;
    --yellow:#ffdd4d;
}

html,body{
    margin:0;
    font-family:'Inter','Roboto',Arial,sans-serif;
    background:linear-gradient(180deg,#030406 0%,var(--bg) 100%);
    color:var(--text);
    -webkit-font-smoothing:antialiased;
}

.wrap{
    max-width:720px;
    margin:20px auto;
    padding:22px;
}

.card{
    background:linear-gradient(180deg, rgba(255,255,255,0.02), var(--panel));
    border-radius:16px;
    padding:20px;
    box-shadow:0 8px 36px rgba(24,40,80,0.45),0 0 28px rgba(77,168,255,0.08) inset;
    border:1px solid rgba(77,168,255,0.12);
    text-align:center;
}

/* Logo */
.logo{
    width:140px;
    margin:0 auto 16px auto;
    display:block;
    filter: drop-shadow(0 0 16px #4da8ff);
}

/* Neon pulsante */
@keyframes neonPulse {
  0%,100%{ text-shadow: 0 0 4px var(--blue),0 0 8px var(--blue),0 0 16px var(--blue);}
  50%{ text-shadow: 0 0 10px var(--blue),0 0 20px var(--blue),0 0 30px var(--blue);}
}

/* Título Neon pulsante */
h1{
    font-size:2.4rem;
    margin:6px 0 4px 0;
    color:var(--blue);
    font-weight:900;
    text-transform:uppercase;
    letter-spacing:2px;
    animation:neonPulse 1.5s infinite alternate;
}

@keyframes neonPulseYellow {
  0%,100%{ text-shadow:0 0 3px var(--yellow),0 0 6px var(--yellow),0 0 12px var(--yellow);}
  50%{ text-shadow:0 0 8px var(--yellow),0 0 16px var(--yellow),0 0 24px var(--yellow);}
}

h2{
    font-size:1rem;
    color:var(--yellow);
    margin:0 0 18px 0;
    font-weight:600;
    animation:neonPulseYellow 1.5s infinite alternate;
}

/* Contador de vagas com neon pulsante */
@keyframes neonVagas{
  0%,100%{ box-shadow:0 6px 18px rgba(77,168,255,0.08);}
  50%{ box-shadow:0 6px 18px rgba(77,168,255,0.4);}
}

.vagasBox{
    display:flex;
    justify-content:space-between;
    align-items:center;
    gap:12px;
    padding:14px;
    border-radius:12px;
    background:linear-gradient(180deg, rgba(77,168,255,0.05), transparent);
    border:1px solid rgba(77,168,255,0.1);
    color:var(--blue);
    font-weight:700;
    margin-bottom:14px;
    animation:neonVagas 1.5s infinite alternate;
}

.vagasBox span.count{
    font-size:1.1rem;
    color:#fff;
    background:rgba(77,168,255,0.2);
    padding:6px 12px;
    border-radius:8px;
    font-weight:800;
    border:1px solid rgba(77,168,255,0.12);
}

/* Termo */
.termo{
    background:rgba(255,255,255,0.02);
    border-radius:12px;
    padding:16px;
    height:320px;
    overflow:auto;
    color:#fff;
    line-height:1.7;
    border:1px solid rgba(255,255,255,0.05);
    margin-bottom:14px;
    text-align:left;
}

.termo p{
    margin:12px 0;
}

/* Input nome */
input#nome{
    width:100%;
    padding:12px;
    font-size:1rem;
    border-radius:12px;
    border:1px solid rgba(77,168,255,0.3);
    margin-bottom:12px;
    background:#111827;
    color:#fff;
}

/* Checkbox */
label.checkbox{
    display:flex;
    gap:12px;
    align-items:center;
    cursor:pointer;
    color:var(--pink);
    font-weight:600;
    text-shadow:0 0 4px var(--pink),0 0 8px var(--pink);
}

input[type="checkbox"]{
    width:20px;
    height:20px;
    accent-color: var(--blue);
    transform:scale(1.05);
}

/* Botão pulsante */
@keyframes neonBtn{
  0%,100%{ box-shadow:0 8px 20px rgba(77,168,255,0.25),0 0 20px rgba(255,77,255,0.14);}
  50%{ box-shadow:0 8px 20px rgba(77,168,255,0.7),0 0 28px rgba(255,77,255,0.4);}
}

.btn{
    display:block;
    width:100%;
    padding:14px 16px;
    border-radius:14px;
    text-align:center;
    font-weight:900;
    font-size:1.1rem;
    cursor:pointer;
    border:none;
    transition: transform .12s ease, opacity .12s ease;
}

.btn-entrar{
    background:linear-gradient(45deg,var(--blue),var(--pink),var(--yellow));
    color:#05060a;
    display:none;
    text-shadow:0 0 6px #fff;
    animation:neonBtn 1.5s infinite alternate;
}

.btn-entrar:active{
    transform:translateY(1px) scale(.998);
}

/* Lotado */
.lotado{
    display:none;
    margin-top:12px;
    padding:14px;
    border-radius:12px;
    background: linear-gradient(180deg,#00005f,#0040a8);
    color:#00ffff;
    text-align:center;
    font-weight:900;
    font-size:1.4rem;
    text-transform:uppercase;
    text-shadow:0 0 12px #00ffff,0 0 24px #00ffff;
}

/* Responsividade */
@media (max-width:420px){
    .wrap{padding:12px;}
    h1{font-size:1.8rem;}
    h2{font-size:0.95rem;}
    .termo{height:280px; padding:12px; font-size:0.95rem;}
}
</style>
</head>
<body>
<div class="wrap">
<div class="card">
  <!-- Logo no topo -->
  <img src="https://i.imgur.com/MwHr761.png" alt="Logo Morro da Mesa" class="logo">

  <h1>Morro da Mesa</h1>
  <h2>23 de novembro — Trilheiros de Rondonópolis</h2>

  <div class="vagasBox">
      <div>Vagas disponíveis</div>
      <div><span id="vagasNum" class="count">—</span> / 75</div>
  </div>

  <div id="lotado" class="lotado">GRUPO LOTADO</div>

  <div class="termo">
      <p>- O percurso tem nível médio a avançado, com trechos íngremes e escorregadios.</p>
      <p>- É obrigatório o uso de calçados adequados, água, protetor solar e roupas confortáveis.</p>
      <p>- É proibido o uso de caixas de som para preservar o ambiente.</p>
      <p>- O participante deve respeitar a natureza, não deixar lixo e seguir as orientações do guia.</p>
      <p>- A organização não se responsabiliza por acidentes causados por imprudência ou desrespeito às regras.</p>
      <p>- Em caso de condições climáticas adversas, o passeio poderá ser cancelado ou adiado.</p>
      <p>- É indispensável estar em boas condições de saúde para participar da trilha.</p>
      <p>- Pessoas com problemas cardíacos, respiratórios, mobilidade reduzida ou com histórico de desmaios/síncopes não são orientadas a realizar essa atividade.</p>
      <p>- Participantes sedentários ou sem preparo físico devem avaliar cuidadosamente os riscos antes de confirmar presença.</p>
      <p>- Crianças menores de 14 anos, não serão permitidas.</p>
  </div>

  <input type="text" id="nome" placeholder="Digite seu nome completo">

  <label class="checkbox">
    <input type="checkbox" id="aceite">
    Confirmo que li e aceito o termo de responsabilidade
  </label>

  <button class="btn btn-entrar" id="btnEntrar">Clica aqui para entrar no grupo</button>

</div>
</div>

<script>
const APPS_SCRIPT_URL = "https://script.google.com/macros/s/AKfycbz9m_YrXZ3pCNTsqnBX9XuNuTIINjQ0ErPpmkUyU9FkkYKv9bI5fWP2w93Ui9VjA1hs8Q/exec";
const WHATSAPP_LINK = "https://chat.whatsapp.com/GOReIoh8N0ZCa4pQh2IMy7";
const MAX_VAGAS = 75;

const vagasNumEl = document.getElementById("vagasNum");
const lotadoEl = document.getElementById("lotado");
const aceiteEl = document.getElementById("aceite");
const btnEntrar = document.getElementById("btnEntrar");
const nomeInput = document.getElementById("nome");

function atualizarVagas(vagas){
  if(vagas <= 0){
    lotadoEl.style.display = "block";
    vagasNumEl.textContent = 0;
    aceiteEl.disabled = true;
    btnEntrar.style.display = "none";
  } else {
    lotadoEl.style.display = "none";
    aceiteEl.disabled = false;
    vagasNumEl.textContent = vagas;
  }
}

async function carregarVagas(){
  try{
    const res = await fetch(APPS_SCRIPT_URL, {cache:"no-cache"});
    const data = await res.json();
    let vagas = Number(data.vagas);
    if(isNaN(vagas)) vagas = MAX_VAGAS;
    atualizarVagas(vagas);
  }catch(e){
    vagasNumEl.textContent = "—";
    console.error("Erro ao buscar vagas",e);
  }
}

function verificarForm(){
  if(nomeInput.value.trim() !== "" && aceiteEl.checked && Number(vagasNumEl.textContent) > 0){
    btnEntrar.style.display = "block";
  } else {
    btnEntrar.style.display = "none";
  }
}

nomeInput.addEventListener("input", verificarForm);
aceiteEl.addEventListener("change", verificarForm);

btnEntrar.addEventListener("click", async ()=>{
  const nome = nomeInput.value.trim();
  if(nome === "") return;
  try{
    await fetch(APPS_SCRIPT_URL + "?nome=" + encodeURIComponent(nome));
  }catch(e){ console.log("Erro enviar nome",e); }
  let vagas = Number(vagasNumEl.textContent) - 1;
  atualizarVagas(vagas);
  window.location.href = WHATSAPP_LINK;
});

carregarVagas();
setInterval(carregarVagas,6000);
</script>
</body>
</html>
